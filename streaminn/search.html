<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search - StreamHub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .search-card {
            background: linear-gradient(145deg, #1a1a2e, #16213e);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .search-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.2);
            border-color: rgba(102, 126, 234, 0.5);
        }
        
        .sidebar {
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .content-area {
            margin-left: 280px;
            transition: margin-left 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .content-area {
                margin-left: 0;
            }
        }
        
        .nav-item {
            transition: all 0.3s ease;
            border-radius: 12px;
        }
        
        .nav-item:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: translateX(8px);
        }
        
        .nav-item.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
        
        .search-container {
            position: relative;
        }
        
        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(26, 26, 46, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }
        
        .filter-chip {
            background: rgba(26, 26, 46, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .filter-chip:hover {
            background: rgba(102, 126, 234, 0.2);
            border-color: rgba(102, 126, 234, 0.5);
        }
        
        .filter-chip.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: rgba(102, 126, 234, 0.8);
        }
        
        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .video-player {
            background: #000;
            border-radius: 12px;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <!-- Navigation Sidebar -->
    <div class="fixed left-0 top-0 h-full w-72 sidebar z-50 hidden lg:block">
        <div class="p-6">
            <div class="flex items-center space-x-3 mb-8">
                <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-blue-600 rounded-lg flex items-center justify-center">
                    <i class="fas fa-play text-white text-xl"></i>
                </div>
                <h1 class="text-2xl font-bold text-white">StreamHub</h1>
            </div>
            
            <nav class="space-y-3">
                <a href="index.html" class="nav-item flex items-center space-x-3 px-4 py-3 text-gray-300">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="movies.html" class="nav-item flex items-center space-x-3 px-4 py-3 text-gray-300">
                    <i class="fas fa-film"></i>
                    <span>Movies</span>
                </a>
                <a href="sports.html" class="nav-item flex items-center space-x-3 px-4 py-3 text-gray-300">
                    <i class="fas fa-football-ball"></i>
                    <span>Live Sports</span>
                </a>
                <a href="search.html" class="nav-item active flex items-center space-x-3 px-4 py-3 text-white">
                    <i class="fas fa-search"></i>
                    <span>Search</span>
                </a>
                <a href="watchlist.html" class="nav-item flex items-center space-x-3 px-4 py-3 text-gray-300">
                    <i class="fas fa-bookmark"></i>
                    <span>Watchlist</span>
                </a>
            </nav>
            
            <div class="mt-8 p-4 glass-effect rounded-xl">
                <h3 class="text-white font-semibold mb-2">Search Tips</h3>
                <div class="space-y-2 text-sm text-gray-300">
                    <div class="flex items-start space-x-2">
                        <i class="fas fa-lightbulb text-yellow-400 mt-1"></i>
                        <span>Search by movie title, actor, or director</span>
                    </div>
                    <div class="flex items-start space-x-2">
                        <i class="fas fa-filter text-blue-400 mt-1"></i>
                        <span>Use filters to narrow down results</span>
                    </div>
                    <div class="flex items-start space-x-2">
                        <i class="fas fa-history text-green-400 mt-1"></i>
                        <span>Recent searches are saved automatically</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Navigation -->
    <div class="lg:hidden fixed bottom-0 left-0 right-0 bg-black bg-opacity-90 backdrop-blur-lg border-t border-gray-800 z-50">
        <div class="flex justify-around py-3">
            <a href="index.html" class="flex flex-col items-center space-y-1 text-gray-400">
                <i class="fas fa-home text-lg"></i>
                <span class="text-xs">Home</span>
            </a>
            <a href="movies.html" class="flex flex-col items-center space-y-1 text-gray-400">
                <i class="fas fa-film text-lg"></i>
                <span class="text-xs">Movies</span>
            </a>
            <a href="sports.html" class="flex flex-col items-center space-y-1 text-gray-400">
                <i class="fas fa-football-ball text-lg"></i>
                <span class="text-xs">Sports</span>
            </a>
            <a href="search.html" class="flex flex-col items-center space-y-1 text-blue-400">
                <i class="fas fa-search text-lg"></i>
                <span class="text-xs">Search</span>
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="content-area min-h-screen pb-20 lg:pb-0">
        <!-- Header -->
        <header class="p-6 pb-0">
            <div class="mb-8">
                <h1 class="text-4xl font-bold text-white mb-6">Search</h1>
                
                <!-- Search Bar -->
                <div class="search-container max-w-2xl">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Search movies, TV shows, actors, sports..." 
                               class="w-full px-6 py-4 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 text-lg">
                        <i class="fas fa-search absolute right-4 top-4 text-gray-400 text-xl"></i>
                    </div>
                    <div id="searchSuggestions" class="search-suggestions"></div>
                </div>
            </div>
            
            <!-- Filter Chips -->
            <div class="flex flex-wrap gap-3 mb-6">
                <button class="filter-chip active px-4 py-2 text-white rounded-lg" data-filter="all">
                    <i class="fas fa-th-large mr-2"></i>All
                </button>
                <button class="filter-chip px-4 py-2 text-gray-300 rounded-lg" data-filter="movies">
                    <i class="fas fa-film mr-2"></i>Movies
                </button>
                <button class="filter-chip px-4 py-2 text-gray-300 rounded-lg" data-filter="tv">
                    <i class="fas fa-tv mr-2"></i>TV Shows
                </button>
                <button class="filter-chip px-4 py-2 text-gray-300 rounded-lg" data-filter="sports">
                    <i class="fas fa-football-ball mr-2"></i>Sports
                </button>
                <button class="filter-chip px-4 py-2 text-gray-300 rounded-lg" data-filter="actors">
                    <i class="fas fa-user mr-2"></i>Actors
                </button>
            </div>
        </header>

        <!-- Search Results -->
        <div class="p-6 pt-0">
            <!-- Recent Searches -->
            <section id="recentSearches" class="mb-8">
                <h2 class="text-2xl font-bold text-white mb-4 flex items-center">
                    <i class="fas fa-history text-blue-400 mr-3"></i>
                    Recent Searches
                </h2>
                <div class="flex flex-wrap gap-3" id="recentSearchesList">
                    <!-- Recent searches will be loaded here -->
                </div>
            </section>

            <!-- Trending -->
            <section id="trendingSection" class="mb-8">
                <h2 class="text-2xl font-bold text-white mb-4 flex items-center">
                    <i class="fas fa-fire text-red-400 mr-3"></i>
                    Trending Now
                </h2>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4" id="trendingGrid">
                    <!-- Trending content will be loaded here -->
                </div>
            </section>

            <!-- Search Results -->
            <section id="searchResultsSection" class="hidden">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-bold text-white">Search Results</h2>
                    <span id="resultsCount" class="text-gray-400">0 results</span>
                </div>
                
                <!-- Loading Spinner -->
                <div id="loadingSpinner" class="flex justify-center items-center py-12 hidden">
                    <div class="loading-spinner"></div>
                </div>
                
                <!-- Results Grid -->
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6" id="searchResultsGrid">
                    <!-- Search results will be displayed here -->
                </div>
                
                <!-- No Results -->
                <div id="noResults" class="text-center py-12 hidden">
                    <i class="fas fa-search text-6xl text-gray-600 mb-4"></i>
                    <h3 class="text-2xl font-bold text-white mb-2">No results found</h3>
                    <p class="text-gray-400">Try adjusting your search terms or filters</p>
                </div>
            </section>
        </div>
    </div>

    <!-- Video Player Modal -->
    <div id="videoModal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 hidden">
        <div class="bg-black rounded-xl max-w-6xl w-full mx-4">
            <div class="relative">
                <button onclick="closeVideoModal()" class="absolute top-4 right-4 z-10 w-10 h-10 bg-black bg-opacity-50 rounded-full flex items-center justify-center text-white hover:bg-opacity-75">
                    <i class="fas fa-times"></i>
                </button>
                <div class="video-player aspect-video">
                    <div id="mainVideoPlayer" class="w-full h-full">
                        <!-- Video player will be loaded here -->
                    </div>
                </div>
                <div class="p-4 flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <span class="text-white font-semibold" id="videoTitle">Content Title</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Search page functionality
        class SearchPage {
            constructor() {
                this.apiKey = 'af9948790c4e5a90eadd97d97530a9c1';
                this.baseUrl = 'https://api.themoviedb.org/3';
                this.imageBaseUrl = 'https://image.tmdb.org/p/w500';
                this.currentFilter = 'all';
                this.searchTimeout = null;
                this.recentSearches = JSON.parse(localStorage.getItem('streamhub_recent_searches') || '[]');
                
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.loadTrendingContent();
                this.displayRecentSearches();
                this.setupFilterChips();
            }

            setupEventListeners() {
                const searchInput = document.getElementById('searchInput');
                if (searchInput) {
                    searchInput.addEventListener('input', (e) => this.handleSearch(e.target.value));
                    searchInput.addEventListener('focus', () => this.showSuggestions());
                    searchInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            this.performSearch(e.target.value);
                        }
                    });
                }
            }

            setupFilterChips() {
                const filterChips = document.querySelectorAll('.filter-chip');
                filterChips.forEach(chip => {
                    chip.addEventListener('click', () => {
                        // Remove active class from all chips
                        filterChips.forEach(c => {
                            c.classList.remove('active', 'bg-gradient-to-r', 'from-purple-500', 'to-blue-600');
                            c.classList.add('text-gray-300');
                        });
                        
                        // Add active class to clicked chip
                        chip.classList.add('active', 'bg-gradient-to-r', 'from-purple-500', 'to-blue-600');
                        chip.classList.remove('text-gray-300');
                        chip.classList.add('text-white');
                        
                        // Update current filter
                        this.currentFilter = chip.dataset.filter;
                        
                        // Re-perform search with new filter
                        const searchInput = document.getElementById('searchInput');
                        if (searchInput && searchInput.value.trim()) {
                            this.performSearch(searchInput.value);
                        }
                    });
                });
            }

            handleSearch(query) {
                clearTimeout(this.searchTimeout);
                
                if (query.length < 2) {
                    this.hideSearchResults();
                    return;
                }
                
                this.searchTimeout = setTimeout(() => {
                    this.performSearch(query);
                }, 500);
            }

            async performSearch(query) {
                // Add to recent searches
                this.addToRecentSearches(query);
                
                // Show loading
                this.showLoading();
                
                try {
                    let results = [];
                    
                    if (this.currentFilter === 'all' || this.currentFilter === 'movies') {
                        const movieResults = await this.searchMovies(query);
                        results = [...results, ...movieResults];
                    }
                    
                    if (this.currentFilter === 'all' || this.currentFilter === 'tv') {
                        const tvResults = await this.searchTVShows(query);
                        results = [...results, ...tvResults];
                    }
                    
                    if (this.currentFilter === 'all' || this.currentFilter === 'actors') {
                        const actorResults = await this.searchPeople(query);
                        results = [...results, ...actorResults];
                    }
                    
                    // Filter results based on current filter
                    if (this.currentFilter !== 'all') {
                        results = results.filter(item => {
                            if (this.currentFilter === 'movies') return item.media_type === 'movie';
                            if (this.currentFilter === 'tv') return item.media_type === 'tv';
                            if (this.currentFilter === 'actors') return item.media_type === 'person';
                            return true;
                        });
                    }
                    
                    this.displaySearchResults(results, query);
                } catch (error) {
                    console.error('Error performing search:', error);
                    this.displaySearchResults([], query);
                } finally {
                    this.hideLoading();
                }
            }

            async searchMovies(query) {
                try {
                    const response = await fetch(`${this.baseUrl}/search/movie?api_key=${this.apiKey}&query=${encodeURIComponent(query)}`);
                    const data = await response.json();
                    return data.results || [];
                } catch (error) {
                    console.error('Error searching movies:', error);
                    return [];
                }
            }

            async searchTVShows(query) {
                try {
                    const response = await fetch(`${this.baseUrl}/search/tv?api_key=${this.apiKey}&query=${encodeURIComponent(query)}`);
                    const data = await response.json();
                    return data.results || [];
                } catch (error) {
                    console.error('Error searching TV shows:', error);
                    return [];
                }
            }

            async searchPeople(query) {
                try {
                    const response = await fetch(`${this.baseUrl}/search/person?api_key=${this.apiKey}&query=${encodeURIComponent(query)}`);
                    const data = await response.json();
                    return data.results || [];
                } catch (error) {
                    console.error('Error searching people:', error);
                    return [];
                }
            }

            displaySearchResults(results, query) {
                const section = document.getElementById('searchResultsSection');
                const grid = document.getElementById('searchResultsGrid');
                const count = document.getElementById('resultsCount');
                const noResults = document.getElementById('noResults');
                const trending = document.getElementById('trendingSection');
                const recent = document.getElementById('recentSearches');
                
                // Hide trending and recent searches when showing results
                trending.classList.add('hidden');
                recent.classList.add('hidden');
                
                // Show results section
                section.classList.remove('hidden');
                
                // Update results count
                count.textContent = `${results.length} results for "${query}"`;
                
                if (results.length === 0) {
                    grid.innerHTML = '';
                    noResults.classList.remove('hidden');
                    return;
                }
                
                noResults.classList.add('hidden');
                
                grid.innerHTML = results.map(item => {
                    if (item.media_type === 'movie') {
                        return this.renderMovieCard(item);
                    } else if (item.media_type === 'tv') {
                        return this.renderTVCard(item);
                    } else if (item.media_type === 'person') {
                        return this.renderPersonCard(item);
                    }
                    return '';
                }).join('');
            }

            renderMovieCard(movie) {
                return `
                    <div class="search-card rounded-xl overflow-hidden cursor-pointer group" onclick="searchPage.showMovieDetail(${movie.id})">
                        <div class="relative">
                            <img src="${movie.poster_path ? this.imageBaseUrl + movie.poster_path : 'https://via.placeholder.com/300x450?text=No+Image'}" 
                                 alt="${movie.title}" class="w-full h-80 object-cover">
                            <div class="absolute top-2 right-2 bg-black bg-opacity-70 text-white px-2 py-1 rounded text-sm">
                                <i class="fas fa-star text-yellow-400 mr-1"></i>
                                ${movie.vote_average.toFixed(1)}
                            </div>
                            <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <div class="absolute bottom-4 left-4 right-4 space-y-2">
                                    <button class="w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors" onclick="event.stopPropagation(); searchPage.playMovie(${movie.id})">
                                        <i class="fas fa-play mr-2"></i>Watch Now
                                    </button>
                                    <button class="w-full py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors" onclick="event.stopPropagation(); searchPage.toggleWatchlist(${movie.id})">
                                        <i class="fas fa-bookmark mr-2"></i>Add to Watchlist
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="p-4">
                            <h4 class="text-white font-semibold truncate mb-2">${movie.title}</h4>
                            <p class="text-gray-400 text-sm mb-2">${movie.release_date ? new Date(movie.release_date).getFullYear() : 'N/A'}</p>
                            <div class="flex items-center space-x-2">
                                <span class="text-xs bg-blue-600 text-white px-2 py-1 rounded">Movie</span>
                                <span class="text-xs text-gray-400">${Math.floor(Math.random() * 60 + 90)} min</span>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderTVCard(tv) {
                return `
                    <div class="search-card rounded-xl overflow-hidden cursor-pointer group" onclick="searchPage.showTVDetail(${tv.id})">
                        <div class="relative">
                            <img src="${tv.poster_path ? this.imageBaseUrl + tv.poster_path : 'https://via.placeholder.com/300x450?text=No+Image'}" 
                                 alt="${tv.name}" class="w-full h-80 object-cover">
                            <div class="absolute top-2 right-2 bg-black bg-opacity-70 text-white px-2 py-1 rounded text-sm">
                                <i class="fas fa-star text-yellow-400 mr-1"></i>
                                ${tv.vote_average.toFixed(1)}
                            </div>
                            <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <div class="absolute bottom-4 left-4 right-4 space-y-2">
                                    <button class="w-full py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors" onclick="event.stopPropagation(); searchPage.playTVShow(${tv.id})">
                                        <i class="fas fa-play mr-2"></i>Watch Now
                                    </button>
                                    <button class="w-full py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors" onclick="event.stopPropagation(); searchPage.toggleWatchlist(${tv.id})">
                                        <i class="fas fa-bookmark mr-2"></i>Add to Watchlist
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="p-4">
                            <h4 class="text-white font-semibold truncate mb-2">${tv.name}</h4>
                            <p class="text-gray-400 text-sm mb-2">${tv.first_air_date ? new Date(tv.first_air_date).getFullYear() : 'N/A'}</p>
                            <div class="flex items-center space-x-2">
                                <span class="text-xs bg-purple-600 text-white px-2 py-1 rounded">TV Show</span>
                                <span class="text-xs text-gray-400">${tv.episode_count || 'N/A'} episodes</span>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderPersonCard(person) {
                return `
                    <div class="search-card rounded-xl overflow-hidden cursor-pointer group" onclick="searchPage.showPersonDetail(${person.id})">
                        <div class="relative">
                            <img src="${person.profile_path ? this.imageBaseUrl + person.profile_path : 'https://via.placeholder.com/300x450?text=No+Image'}" 
                                 alt="${person.name}" class="w-full h-80 object-cover">
                            <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <div class="absolute bottom-4 left-4 right-4">
                                    <button class="w-full py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                                        <i class="fas fa-user mr-2"></i>View Profile
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="p-4">
                            <h4 class="text-white font-semibold truncate mb-2">${person.name}</h4>
                            <p class="text-gray-400 text-sm mb-2">${person.known_for_department || 'Actor'}</p>
                            <div class="flex items-center space-x-2">
                                <span class="text-xs bg-green-600 text-white px-2 py-1 rounded">Actor</span>
                                <span class="text-xs text-gray-400">${person.popularity ? Math.floor(person.popularity) : 'N/A'} fans</span>
                            </div>
                        </div>
                    </div>
                `;
            }

            hideSearchResults() {
                const section = document.getElementById('searchResultsSection');
                const trending = document.getElementById('trendingSection');
                const recent = document.getElementById('recentSearches');
                
                section.classList.add('hidden');
                trending.classList.remove('hidden');
                recent.classList.remove('hidden');
            }

            showLoading() {
                const spinner = document.getElementById('loadingSpinner');
                spinner.classList.remove('hidden');
            }

            hideLoading() {
                const spinner = document.getElementById('loadingSpinner');
                spinner.classList.add('hidden');
            }

            async loadTrendingContent() {
                try {
                    const response = await fetch(`${this.baseUrl}/trending/movie/week?api_key=${this.apiKey}&page=1`);
                    const data = await response.json();
                    this.displayTrendingContent(data.results.slice(0, 12));
                } catch (error) {
                    console.error('Error loading trending content:', error);
                    this.displayTrendingContent(this.getMockMovies().slice(0, 12));
                }
            }

            displayTrendingContent(movies) {
                const container = document.getElementById('trendingGrid');
                if (!container) return;

                container.innerHTML = movies.map(movie => `
                    <div class="search-card rounded-lg overflow-hidden cursor-pointer hover-scale" onclick="searchPage.showMovieDetail(${movie.id})">
                        <div class="relative">
                            <img src="${movie.poster_path ? this.imageBaseUrl + movie.poster_path : 'https://via.placeholder.com/200x300?text=No+Image'}" 
                                 alt="${movie.title}" class="w-full h-48 object-cover">
                            <div class="absolute top-1 right-1 bg-black bg-opacity-70 text-white px-1 py-0.5 rounded text-xs">
                                ${movie.vote_average.toFixed(1)}
                            </div>
                        </div>
                        <div class="p-3">
                            <h5 class="text-white font-medium text-sm truncate">${movie.title}</h5>
                            <p class="text-gray-400 text-xs">${movie.release_date ? new Date(movie.release_date).getFullYear() : 'N/A'}</p>
                        </div>
                    </div>
                `).join('');
            }

            displayRecentSearches() {
                const container = document.getElementById('recentSearchesList');
                if (!container || this.recentSearches.length === 0) {
                    document.getElementById('recentSearches').style.display = 'none';
                    return;
                }

                container.innerHTML = this.recentSearches.slice(0, 10).map(search => `
                    <button class="px-4 py-2 bg-gray-800 text-gray-300 rounded-lg hover:bg-gray-700 transition-colors" onclick="searchPage.searchFromRecent('${search}')">
                        <i class="fas fa-history mr-2"></i>${search}
                    </button>
                `).join('');
            }

            addToRecentSearches(query) {
                if (!query.trim()) return;
                
                // Remove if already exists
                this.recentSearches = this.recentSearches.filter(s => s.toLowerCase() !== query.toLowerCase());
                
                // Add to beginning
                this.recentSearches.unshift(query);
                
                // Keep only last 10
                this.recentSearches = this.recentSearches.slice(0, 10);
                
                // Save to localStorage
                localStorage.setItem('streamhub_recent_searches', JSON.stringify(this.recentSearches));
                
                // Update display
                this.displayRecentSearches();
            }

            searchFromRecent(query) {
                const searchInput = document.getElementById('searchInput');
                if (searchInput) {
                    searchInput.value = query;
                    this.performSearch(query);
                }
            }

            showSuggestions() {
                // This could be extended to show autocomplete suggestions
                console.log('Show search suggestions');
            }

            // Content interaction methods
            showMovieDetail(movieId) {
                // Redirect to movies page with movie detail
                window.location.href = `movies.html#movie-${movieId}`;
            }

            showTVDetail(tvId) {
                // Show TV show detail modal or redirect
                console.log('Show TV detail for:', tvId);
            }

            showPersonDetail(personId) {
                // Show person detail modal or redirect
                console.log('Show person detail for:', personId);
            }

            playMovie(movieId) {
                const modal = document.getElementById('videoModal');
                const videoPlayer = document.getElementById('mainVideoPlayer');
                const videoTitle = document.getElementById('videoTitle');
                
                // Use the actual vidking.net player with TMDB ID
                const playerUrl = `https://www.vidking.net/embed/movie/${movieId}?color=9146ff&autoPlay=true`;
                
                videoPlayer.innerHTML = `
                    <iframe src="${playerUrl}" 
                            width="100%" 
                            height="100%" 
                            frameborder="0" 
                            allowfullscreen
                            allow="autoplay; encrypted-media">
                    </iframe>
                `;
                
                videoTitle.textContent = `Movie ${movieId}`;
                modal.classList.remove('hidden');
            }

            playTVShow(tvId) {
                const modal = document.getElementById('videoModal');
                const videoPlayer = document.getElementById('mainVideoPlayer');
                const videoTitle = document.getElementById('videoTitle');
                
                // Use the actual vidking.net player with TMDB ID for TV shows
                // Default to season 1, episode 1
                const playerUrl = `https://www.vidking.net/embed/tv/${tvId}/1/1?color=9146ff&autoPlay=true`;
                
                videoPlayer.innerHTML = `
                    <iframe src="${playerUrl}" 
                            width="100%" 
                            height="100%" 
                            frameborder="0" 
                            allowfullscreen
                            allow="autoplay; encrypted-media">
                    </iframe>
                `;
                
                videoTitle.textContent = `TV Show ${tvId}`;
                modal.classList.remove('hidden');
            }

            toggleWatchlist(itemId) {
                let watchlist = JSON.parse(localStorage.getItem('streamhub_watchlist') || '[]');
                const index = watchlist.indexOf(itemId);
                
                if (index > -1) {
                    watchlist.splice(index, 1);
                    this.showNotification('Removed from watchlist', 'success');
                } else {
                    watchlist.push(itemId);
                    this.showNotification('Added to watchlist', 'success');
                }
                
                localStorage.setItem('streamhub_watchlist', JSON.stringify(watchlist));
            }

            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg text-white font-medium transform translate-x-full transition-transform duration-300 ${
                    type === 'success' ? 'bg-green-600' : 
                    type === 'error' ? 'bg-red-600' : 'bg-blue-600'
                }`;
                notification.textContent = message;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.classList.remove('translate-x-full');
                }, 100);
                
                setTimeout(() => {
                    notification.classList.add('translate-x-full');
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 300);
                }, 3000);
            }

            getMockMovies() {
                return [
                    { id: 1, title: "Inception", poster_path: "/9gk7adHYeDvHkCSE2Av0N1MIHZQt.jpg", vote_average: 8.8, release_date: "2010-07-16" },
                    { id: 2, title: "The Dark Knight", poster_path: "/qJ2tW6WMUDux911r6m7haRef0WH.jpg", vote_average: 9.0, release_date: "2008-07-18" },
                    { id: 3, title: "Interstellar", poster_path: "/gEU2QniE6E77NI6lCU6MxlNBvIx.jpg", vote_average: 8.6, release_date: "2014-11-07" },
                    { id: 4, title: "The Matrix", poster_path: "/f89U1ADr1oiT1k9EeLlk9JVgP9n.jpg", vote_average: 8.7, release_date: "1999-03-31" },
                    { id: 5, title: "Pulp Fiction", poster_path: "/d5iIlFn5s0ImszYzBPb8JPIfbXD.jpg", vote_average: 8.9, release_date: "1994-10-14" },
                    { id: 6, title: "The Shawshank Redemption", poster_path: "/q6y0Go1tsGEsmtFryDOJo3dEmqu.jpg", vote_average: 9.3, release_date: "1994-09-23" }
                ];
            }
        }

        // Global functions
        function closeVideoModal() {
            const modal = document.getElementById('videoModal');
            const videoPlayer = document.getElementById('mainVideoPlayer');
            if (modal) {
                modal.classList.add('hidden');
                videoPlayer.innerHTML = '';
            }
        }

        // Initialize the search page
        const searchPage = new SearchPage();
    </script>
</body>
</html>